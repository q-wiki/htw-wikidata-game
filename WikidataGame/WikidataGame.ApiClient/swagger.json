{"swagger":"2.0","info":{"version":"v1","title":"Wikidata Game API"},"paths":{"/api/Auth":{"get":{"tags":["Auth"],"summary":"Authenticates a player","operationId":"Authenticate","consumes":[],"produces":["text/plain","application/json","text/json"],"parameters":[{"name":"X-Device-ID","in":"header","description":"device identifier","required":false,"type":"string"},{"name":"X-Push-Token","in":"header","description":"push token generated through firebase/apns","required":false,"type":"string"}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/AuthInfo"}}}}},"/api/Games":{"post":{"tags":["Games"],"summary":"Creates a new game and matches the player with an opponent","operationId":"CreateNewGame","consumes":[],"produces":["application/json"],"parameters":[{"name":"mapWidth","in":"query","description":"Width of generated map","required":false,"type":"integer","format":"int32","default":10},{"name":"mapHeight","in":"query","description":"Height of generated map","required":false,"type":"integer","format":"int32","default":10},{"name":"accessibleTilesCount","in":"query","description":"How many accessible tiles the generated map should contain.","required":false,"type":"integer","format":"int32","default":70}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/GameInfo"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"}},"security":[{"oauth2":[]}]}},"/api/Games/{gameId}":{"get":{"tags":["Games"],"summary":"Retrieves information on the specified game","operationId":"RetrieveGameState","consumes":[],"produces":["application/json"],"parameters":[{"name":"gameId","in":"path","description":"game identifier","required":true,"type":"string"}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/Game"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"}},"security":[{"oauth2":[]}]},"delete":{"tags":["Games"],"summary":"Stops/deletes the specified game","operationId":"DeleteGame","consumes":[],"produces":["application/json"],"parameters":[{"name":"gameId","in":"path","description":"game identifier","required":true,"type":"string"}],"responses":{"204":{"description":"Success"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"}},"security":[{"oauth2":[]}]}},"/api/games/{gameId}/minigames":{"post":{"tags":["Minigames"],"summary":"Initializes a new minigame","operationId":"InitalizeMinigame","consumes":["application/json-patch+json","application/json","text/json","application/*+json"],"produces":["text/plain","application/json","text/json"],"parameters":[{"name":"gameId","in":"path","description":"game identifier","required":true,"type":"string"},{"name":"minigameParams","in":"body","description":"minigame information containing category and tile identifier","required":false,"schema":{"$ref":"#/definitions/MiniGameInit"}}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/MiniGame"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"}},"security":[{"oauth2":[]}]}},"/api/games/{gameId}/minigames/{minigameId}":{"get":{"tags":["Minigames"],"summary":"Retrieves the details of the specified minigame","operationId":"RetrieveMinigameInfo","consumes":[],"produces":["text/plain","application/json","text/json"],"parameters":[{"name":"gameId","in":"path","description":"game identifier","required":true,"type":"string"},{"name":"minigameId","in":"path","description":"minigame identifier","required":true,"type":"string"}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/MiniGame"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"}},"security":[{"oauth2":[]}]},"post":{"tags":["Minigames"],"summary":"Post the answer(s) to the specified minigame","operationId":"AnswerMinigame","consumes":["application/json-patch+json","application/json","text/json","application/*+json"],"produces":["text/plain","application/json","text/json"],"parameters":[{"name":"gameId","in":"path","description":"game identifier","required":true,"type":"string"},{"name":"minigameId","in":"path","description":"minigame identifier","required":true,"type":"string"},{"name":"answers","in":"body","description":"answer(s)","required":false,"schema":{"uniqueItems":false,"type":"array","items":{"type":"string"}}}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/MiniGameResult"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"}},"security":[{"oauth2":[]}]}}},"definitions":{"AuthInfo":{"type":"object","properties":{"bearer":{"type":"string"},"expires":{"format":"date-time","type":"string"}}},"GameInfo":{"type":"object","properties":{"gameId":{"type":"string"},"isAwaitingOpponentToJoin":{"type":"boolean"},"message":{"type":"string"}}},"Game":{"type":"object","properties":{"id":{"type":"string"},"tiles":{"uniqueItems":false,"type":"array","items":{"uniqueItems":false,"type":"array","items":{"$ref":"#/definitions/Tile"}}},"winningPlayerIds":{"uniqueItems":false,"type":"array","items":{"type":"string"}},"me":{"$ref":"#/definitions/Player"},"opponent":{"$ref":"#/definitions/Player"},"nextMovePlayerId":{"type":"string"},"moveExpiry":{"format":"date-time","type":"string"},"awaitingOpponentToJoin":{"type":"boolean"}}},"Tile":{"type":"object","properties":{"id":{"type":"string"},"chosenCategoryId":{"type":"string"},"availableCategories":{"uniqueItems":false,"type":"array","items":{"$ref":"#/definitions/Category"}},"difficulty":{"format":"int32","type":"integer"},"ownerId":{"type":"string"}}},"Player":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"}}},"Category":{"type":"object","properties":{"id":{"type":"string"},"title":{"type":"string"}}},"MiniGameInit":{"type":"object","properties":{"tileId":{"type":"string"},"categoryId":{"type":"string"}}},"MiniGame":{"type":"object","properties":{"id":{"type":"string"},"type":{"format":"int32","enum":[0,1,2],"type":"integer"},"taskDescription":{"type":"string"},"answerOptions":{"uniqueItems":false,"type":"array","items":{"type":"string"}}}},"MiniGameResult":{"type":"object","properties":{"isWin":{"type":"boolean"},"correctAnswer":{"uniqueItems":false,"type":"array","items":{"type":"string"}},"tiles":{"uniqueItems":false,"type":"array","items":{"uniqueItems":false,"type":"array","items":{"$ref":"#/definitions/Tile"}}},"nextMovePlayerId":{"type":"string"}}}},"securityDefinitions":{"oauth2":{"name":"Authorization","in":"header","type":"apiKey","description":"JWT Authorization header using the Bearer scheme. Example: \"Authorization: Bearer {token}\""}}}